<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <script>
    // 1.abort()
    // 终止当前请求
    // 一般配合abort事件一起使用

    // 2.setRequestHeader()
    // 可以设置请求头信息
    // xhr.setRequestHeader(头部字段的名称，头部字段的值)
    const url = 'https://www.imooc.com/api/http/search/suggest?words=js';
    // const url = 'https://www.imooc.com/api/http/json/search/suggest?words=js';
    const xhr = new XMLHttpRequest();
    xhr.onreadystatechange = () => {
      if(xhr.readyState !== 4) return;
      if((xhr.status >= 200 && xhr.status < 300) || xhr.status === 304) {
        // 文本形式的响应内容
        // responseText只能在responseType为空''或者'text'时才能使用
        // response IE6-9不支持，IE10才开始支持
        console.log(xhr.responseText);
      }
    };
    xhr.open('POST', url, true);

    // xhr.timeout = 10000;
    // IE6-7不支持，IE8开始支持

    // withCredientials属性
    // 指定使用Ajax发送请求时是否携带Cookie
    // 使用Ajax发送请求，默认情况下，同域时，会携带Cookie；跨域时则不会
    // xhr.withCredientials = true;
    // 最终能否成功跨域携带Cookie，还要看服务器设置同不同意
    // IE10开始支持

    // 请求头中的Content-Type字段用来告诉服务器，浏览器发送的数据是什么格式的
    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
    xhr.send('username=hzc&age=25');
    // xhr.setRequestHeader('Content-Type', 'application/json');
    // xhr.send(
    //   JSON.stringify({
    //     username: 'hzc'
    //   })
    // );
    // xhr.abort();
  </script>
</body>
</html>